document.addEventListener('DOMContentLoaded',function(){const hamburgerBtn=document.getElementById('hamburgerMenu');const sidebar=document.querySelector('.sidebar');const overlay=document.getElementById('sidebarOverlay');hamburgerBtn.addEventListener('click',function(){sidebar.classList.toggle('active');overlay.classList.toggle('active');});overlay.addEventListener('click',function(){sidebar.classList.remove('active');overlay.classList.remove('active');});});function showToast(message){const existingToast=document.querySelector('.toast');if(existingToast){existingToast.remove();}
const toast=document.createElement('div');toast.className='toast';toast.textContent=message;document.body.appendChild(toast);setTimeout(()=>toast.classList.add('show'),10);setTimeout(()=>{toast.classList.remove('show');setTimeout(()=>toast.remove(),300);},3000);}
function showSelectableUrl(url){const existingModal=document.querySelector('.url-modal');if(existingModal){existingModal.remove();}
const modal=document.createElement('div');modal.className='url-modal';const modalContent=document.createElement('div');modalContent.className='url-modal-content';const urlInput=document.createElement('input');urlInput.type='text';urlInput.value=url;urlInput.readOnly=true;urlInput.className='url-input';const closeButton=document.createElement('button');closeButton.textContent='إغلاق';closeButton.className='modal-close-btn';modalContent.appendChild(urlInput);modalContent.appendChild(closeButton);modal.appendChild(modalContent);document.body.appendChild(modal);urlInput.focus();urlInput.select();closeButton.addEventListener('click',()=>modal.remove());modal.addEventListener('click',(e)=>{if(e.target===modal)modal.remove();});}
function executeBulkAction(){const bulkActionForm=document.getElementById('bulkActionForm');if(!bulkActionForm){console.error('Bulk action form not found');return;}
const selectedCheckboxes=document.querySelectorAll('.row-checkbox:checked');const selectedIds=Array.from(selectedCheckboxes).map(cb=>cb.value);const action=document.getElementById('bulkAction').value;if(selectedIds.length===0){alert('الرجاء اختيار عنصر واحد على الأقل');return;}
if(!action){alert('الرجاء اختيار إجراء');return;}
if(action==='delete'&&!confirm('هل أنت متأكد من حذف العناصر المحددة؟')){return;}
document.getElementById('selectedIds').value=JSON.stringify(selectedIds);document.getElementById('selectedAction').value=action;bulkActionForm.submit();}
document.addEventListener('DOMContentLoaded',function(){const selectAll=document.getElementById('selectAll');if(selectAll){selectAll.addEventListener('change',function(){const checkboxes=document.querySelectorAll('.row-checkbox');checkboxes.forEach(checkbox=>checkbox.checked=this.checked);});}
const rowCheckboxes=document.querySelectorAll('.row-checkbox');rowCheckboxes.forEach(checkbox=>{checkbox.addEventListener('change',function(){const allChecked=Array.from(rowCheckboxes).every(cb=>cb.checked);if(selectAll){selectAll.checked=allChecked;}});});});document.addEventListener('DOMContentLoaded',function(){const collapsibles=document.querySelectorAll('.collapsible');collapsibles.forEach(item=>{const header=item.querySelector('.nav-header');header.addEventListener('click',()=>{item.classList.toggle('active');});});const currentPath=window.location.pathname;const allNavItems=document.querySelectorAll('.nav-item a');allNavItems.forEach(item=>{if(item.getAttribute('href')===currentPath){const navHeader=item.querySelector('.nav-header');if(navHeader){navHeader.classList.add('active');}
if(item.classList.contains('sub-item')){item.classList.add('active');const parentCollapsible=item.closest('.collapsible');if(parentCollapsible){parentCollapsible.classList.add('active');}}}});});document.addEventListener('DOMContentLoaded',function(){const passwordToggles=document.querySelectorAll('.password-toggle');passwordToggles.forEach(toggle=>{toggle.addEventListener('click',function(e){e.preventDefault();const targetId=this.getAttribute('data-target');const passwordInput=document.getElementById(targetId);const icon=this.querySelector('i');if(passwordInput.type==='password'){passwordInput.type='text';icon.classList.remove('fa-eye-slash');icon.classList.add('fa-eye');}else{passwordInput.type='password';icon.classList.remove('fa-eye');icon.classList.add('fa-eye-slash');}});});});function togglePasswordVisibility(){const passwordInput=document.getElementById('loginPassword');const toggleButton=document.querySelector('.password-toggle-btn i');if(passwordInput.type==='password'){passwordInput.type='text';toggleButton.classList.remove('fa-eye');toggleButton.classList.add('fa-eye-slash');}else{passwordInput.type='password';toggleButton.classList.remove('fa-eye-slash');toggleButton.classList.add('fa-eye');}}