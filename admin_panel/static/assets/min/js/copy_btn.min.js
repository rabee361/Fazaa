function initializeCopyButtons(){document.querySelectorAll('.copy-btn').forEach(button=>{button.removeEventListener('click',copyButtonHandler);button.addEventListener('click',copyButtonHandler);});}
async function copyButtonHandler(e){e.stopPropagation();const url=this.getAttribute('data-url');try{if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(url);showToast('تم نسخ الرابط بنجاح');}else{const textArea=document.createElement('textarea');textArea.value=url;textArea.style.position='fixed';textArea.style.left='-999999px';textArea.style.top='-999999px';document.body.appendChild(textArea);textArea.focus();textArea.select();try{document.execCommand('copy');textArea.remove();showToast('تم نسخ الرابط بنجاح');}catch(err){textArea.remove();showToast('حدث خطأ أثناء نسخ الرابط - الرجاء النسخ يدوياً');showSelectableUrl(url);}}}catch(err){showToast('حدث خطأ أثناء نسخ الرابط - الرجاء النسخ يدوياً');showSelectableUrl(url);}}
document.addEventListener('DOMContentLoaded',function(){initializeCopyButtons();});function clickHandler(event){if(!event.target.closest('.checkbox-cell')){window.location.href=event.currentTarget.getAttribute('data-link');}}